import { useState } from 'react';
import svgPaths from "../imports/svg-a0nc1hzwsj";

function BgLinear() {
  return (
    <div className="absolute h-[1040.9px] left-[-182px] top-[-43px] w-[723px]" data-name="bg-linear">
      <div className="absolute inset-[-24.02%_-34.58%_-10.96%_-21.99%]">
        <svg className="block size-full" fill="none" preserveAspectRatio="none" viewBox="0 0 1132 1405">
          <g id="bg-linear">
            <g filter="url(#filter0_gf_2_3631)" id="Ellipse 1434" opacity="0.7">
              <ellipse cx="638" cy="1001.5" fill="var(--fill-0, #D4E7DC)" rx="132" ry="153.5" />
            </g>
            <g filter="url(#filter1_gf_2_3631)" id="Ellipse 1435" opacity="0.7">
              <ellipse cx="434" cy="382" fill="var(--fill-0, #C4E1FF)" rx="184" ry="132" />
            </g>
            <g filter="url(#filter2_gf_2_3631)" id="Ellipse 1436" opacity="0.7">
              <ellipse cx="428.5" cy="678.5" fill="var(--fill-0, #DFDBFE)" rx="222.5" ry="154.5" />
            </g>
            <g filter="url(#filter3_fg_2_3631)" id="Ellipse 1438" opacity="0.7">
              <ellipse cx="363.065" cy="1069.45" fill="var(--fill-0, #FFF6E5)" rx="132" ry="179.5" transform="rotate(-30 363.065 1069.45)" />
            </g>
            <foreignObject height="1560" width="1101" x="-13" y="-61">
              <div style={{ backdropFilter: "blur(177px)", clipPath: "url(#bgblur_0_2_3631_clip_path)", height: "100%", width: "100%" }} xmlns="http://www.w3.org/1999/xhtml" />
            </foreignObject>
            <rect data-figma-bg-blur-radius="354" fill="var(--fill-0, white)" fillOpacity="0.1" height="852" id="Rectangle 6" width="393" x="341" y="293" />
            <g filter="url(#filter5_gf_2_3631)" id="Ellipse 1437" opacity="0.7">
              <ellipse cx="750" cy="447" fill="var(--fill-0, #FFD1B7)" rx="132" ry="169" />
            </g>
          </g>
          <defs>
            <filter colorInterpolationFilters="sRGB" filterUnits="userSpaceOnUse" height="807" id="filter0_gf_2_3631" width="764" x="256" y="598">
              <feFlood floodOpacity="0" result="BackgroundImageFix" />
              <feBlend in="SourceGraphic" in2="BackgroundImageFix" mode="normal" result="shape" />
              <feTurbulence baseFrequency="2 2" numOctaves="3" seed="6586" type="fractalNoise" />
              <feDisplacementMap height="100%" in="shape" result="displacedImage" scale="38" width="100%" xChannelSelector="R" yChannelSelector="G" />
              <feMerge result="effect1_texture_2_3631">
                <feMergeNode in="displacedImage" />
              </feMerge>
              <feGaussianBlur result="effect2_foregroundBlur_2_3631" stdDeviation="125" />
            </filter>
            <filter colorInterpolationFilters="sRGB" filterUnits="userSpaceOnUse" height="764" id="filter1_gf_2_3631" width="868" x="0" y="0">
              <feFlood floodOpacity="0" result="BackgroundImageFix" />
              <feBlend in="SourceGraphic" in2="BackgroundImageFix" mode="normal" result="shape" />
              <feTurbulence baseFrequency="2 2" numOctaves="3" seed="6586" type="fractalNoise" />
              <feDisplacementMap height="100%" in="shape" result="displacedImage" scale="38" width="100%" xChannelSelector="R" yChannelSelector="G" />
              <feMerge result="effect1_texture_2_3631">
                <feMergeNode in="displacedImage" />
              </feMerge>
              <feGaussianBlur result="effect2_foregroundBlur_2_3631" stdDeviation="125" />
            </filter>
            <filter colorInterpolationFilters="sRGB" filterUnits="userSpaceOnUse" height="649" id="filter2_gf_2_3631" width="785" x="36" y="354">
              <feFlood floodOpacity="0" result="BackgroundImageFix" />
              <feBlend in="SourceGraphic" in2="BackgroundImageFix" mode="normal" result="shape" />
              <feTurbulence baseFrequency="2 2" numOctaves="3" seed="6586" type="fractalNoise" />
              <feDisplacementMap height="100%" in="shape" result="displacedImage" scale="38" width="100%" xChannelSelector="R" yChannelSelector="G" />
              <feMerge result="effect1_texture_2_3631">
                <feMergeNode in="displacedImage" />
              </feMerge>
              <feGaussianBlur result="effect2_foregroundBlur_2_3631" stdDeviation="85" />
            </filter>
            <filter colorInterpolationFilters="sRGB" filterUnits="userSpaceOnUse" height="537.852" id="filter3_fg_2_3631" width="490.688" x="117.721" y="800.526">
              <feFlood floodOpacity="0" result="BackgroundImageFix" />
              <feBlend in="SourceGraphic" in2="BackgroundImageFix" mode="normal" result="shape" />
              <feGaussianBlur result="effect1_foregroundBlur_2_3631" stdDeviation="25" />
              <feTurbulence baseFrequency="2 2" numOctaves="3" seed="6586" type="fractalNoise" />
              <feDisplacementMap height="100%" in="effect1_foregroundBlur_2_3631" result="displacedImage" scale="38" width="100%" xChannelSelector="R" yChannelSelector="G" />
              <feMerge result="effect2_texture_2_3631">
                <feMergeNode in="displacedImage" />
              </feMerge>
            </filter>
            <clipPath id="bgblur_0_2_3631_clip_path" transform="translate(13 61)">
              <rect height="852" width="393" x="341" y="293" />
            </clipPath>
            <filter colorInterpolationFilters="sRGB" filterUnits="userSpaceOnUse" height="838" id="filter5_gf_2_3631" width="764" x="368" y="28">
              <feFlood floodOpacity="0" result="BackgroundImageFix" />
              <feBlend in="SourceGraphic" in2="BackgroundImageFix" mode="normal" result="shape" />
              <feTurbulence baseFrequency="2 2" numOctaves="3" seed="6586" type="fractalNoise" />
              <feDisplacementMap height="100%" in="shape" result="displacedImage" scale="38" width="100%" xChannelSelector="R" yChannelSelector="G" />
              <feMerge result="effect1_texture_2_3631">
                <feMergeNode in="displacedImage" />
              </feMerge>
              <feGaussianBlur result="effect2_foregroundBlur_2_3631" stdDeviation="125" />
            </filter>
          </defs>
        </svg>
      </div>
    </div>
  );
}

function StatusBarIPhone() {
  return (
    <div className="box-border content-stretch flex flex-col items-start justify-start pb-[30px] pt-[21px] px-0 relative shrink-0 w-full" data-name="Status Bar - iPhone">
      <div className="content-stretch flex items-center justify-between relative shrink-0 w-full">
        <div className="basis-0 grow min-h-px min-w-px relative shrink-0">
          <div className="flex flex-row items-center justify-center relative size-full">
            <div className="box-border content-stretch flex gap-[10px] items-center justify-center pl-[16px] pr-[6px] py-0 relative w-full">
              <div className="font-['SF_Pro:Semibold',_sans-serif] leading-[0] not-italic relative shrink-0 text-[17px] text-black text-center text-nowrap">
                <p className="leading-[22px] whitespace-pre">9:41</p>
              </div>
            </div>
          </div>
        </div>
        <div className="h-[10px] shrink-0 w-[124px]" />
        <div className="basis-0 grow min-h-px min-w-px relative shrink-0">
          <div className="flex flex-row items-center justify-center relative size-full">
            <div className="box-border content-stretch flex gap-[7px] items-center justify-center pl-[6px] pr-[16px] py-0 relative w-full">
              <div className="h-[12.226px] relative shrink-0 w-[19.2px]">
                <svg className="block size-full" fill="none" preserveAspectRatio="none" viewBox="0 0 20 13">
                  <path clipRule="evenodd" d={svgPaths.p1e09e400} fill="var(--fill-0, black)" fillRule="evenodd" />
                </svg>
              </div>
              <div className="h-[12.328px] relative shrink-0 w-[17.142px]">
                <svg className="block size-full" fill="none" preserveAspectRatio="none" viewBox="0 0 18 13">
                  <path clipRule="evenodd" d={svgPaths.p1fac3f80} fill="var(--fill-0, black)" fillRule="evenodd" />
                </svg>
              </div>
              <div className="h-[13px] relative shrink-0 w-[27.328px]">
                <svg className="block size-full" fill="none" preserveAspectRatio="none" viewBox="0 0 28 13">
                  <g>
                    <rect height="12" opacity="0.35" rx="3.8" stroke="var(--stroke-0, black)" width="24" x="0.5" y="0.5" />
                    <path d={svgPaths.p3bbd9700} fill="var(--fill-0, black)" opacity="0.4" />
                    <rect fill="var(--fill-0, black)" height="9" rx="2.5" width="21" x="2" y="2" />
                  </g>
                </svg>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
}

function BackButton({ onBack }: { onBack: () => void }) {
  const [isPressed, setIsPressed] = useState(false);

  return (
    <button 
      className={`relative shrink-0 size-[24px] transition-all duration-150 ${isPressed ? 'scale-95 opacity-80' : 'hover:scale-110'}`}
      onMouseDown={() => setIsPressed(true)}
      onMouseUp={() => setIsPressed(false)}
      onMouseLeave={() => setIsPressed(false)}
      onClick={onBack}
    >
      <svg className="block size-full" fill="none" preserveAspectRatio="none" viewBox="0 0 24 24">
        <path d="M19 12H5M12 19l-7-7 7-7" stroke="var(--stroke-0, black)" strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" />
      </svg>
    </button>
  );
}

function PageHeader({ title, onBack }: { title: string; onBack: () => void }) {
  return (
    <div className="content-stretch flex items-center justify-between px-[30px] py-[15px] relative shrink-0 w-full">
      <BackButton onBack={onBack} />
      <div className="font-['SF_Pro_Display:Bold',_sans-serif] leading-[0] not-italic text-[18px] text-black text-center">
        <p className="leading-[normal]">{title}</p>
      </div>
      <div className="w-[24px]" />
    </div>
  );
}

function InputField({ label, value, type = "text", isPassword = false }: {
  label: string;
  value: string;
  type?: string;
  isPassword?: boolean;
}) {
  const [isPressed, setIsPressed] = useState(false);
  const [showPassword, setShowPassword] = useState(false);

  return (
    <div className="content-stretch flex flex-col gap-[8px] items-start justify-start relative shrink-0 w-full">
      <div className="font-['SF_Pro_Display:Medium',_sans-serif] text-[14px] text-[#212121]">
        <p className="leading-[normal]">{label}</p>
      </div>
      <div className="relative w-full">
        <input
          type={isPassword && !showPassword ? "password" : "text"}
          value={value}
          className="bg-white border border-[#E0E0E0] rounded-[12px] px-[16px] py-[12px] w-full font-['SF_Pro_Display:Regular',_sans-serif] text-[16px] text-black focus:outline-none focus:border-[#a69bf8] transition-all duration-150"
          readOnly
        />
        {isPassword && (
          <button
            className={`absolute right-[12px] top-1/2 transform -translate-y-1/2 p-[4px] transition-all duration-150 ${isPressed ? 'scale-95' : 'hover:scale-110'}`}
            onMouseDown={() => setIsPressed(true)}
            onMouseUp={() => setIsPressed(false)}
            onMouseLeave={() => setIsPressed(false)}
            onClick={() => setShowPassword(!showPassword)}
          >
            <svg className="w-[20px] h-[20px]" fill="none" viewBox="0 0 24 24">
              {showPassword ? (
                <path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24M1 1l22 22" stroke="#606060" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
              ) : (
                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0z" stroke="#606060" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
              )}
            </svg>
          </button>
        )}
      </div>
    </div>
  );
}

function ActionButton({ title, subtitle, type = "default", onPress }: {
  title: string;
  subtitle?: string;
  type?: "default" | "destructive";
  onPress: () => void;
}) {
  const [isPressed, setIsPressed] = useState(false);

  return (
    <button
      className={`bg-white rounded-[16px] p-[20px] relative shrink-0 w-full transition-all duration-150 ${isPressed ? 'scale-[0.98] shadow-lg' : 'hover:shadow-md'} cursor-pointer`}
      onMouseDown={() => setIsPressed(true)}
      onMouseUp={() => setIsPressed(false)}
      onMouseLeave={() => setIsPressed(false)}
      onClick={onPress}
    >
      <div className="content-stretch flex flex-col gap-[4px] items-start justify-start relative w-full">
        <div className={`font-['SF_Pro_Display:Medium',_sans-serif] text-[16px] ${type === 'destructive' ? 'text-[#FF4444]' : 'text-black'}`}>
          <p className="leading-[normal] text-left">{title}</p>
        </div>
        {subtitle && (
          <div className="font-['SF_Pro_Display:Regular',_sans-serif] text-[14px] text-[#606060]">
            <p className="leading-[normal] text-left">{subtitle}</p>
          </div>
        )}
      </div>
    </button>
  );
}

export function AccountPasswordPage({ onBack }: { onBack: () => void }) {
  return (
    <div className="bg-white block overflow-clip relative rounded-[44px] size-full">
      <BgLinear />
      
      <div className="absolute content-stretch flex flex-col h-[732px] items-start justify-start left-0 top-0 w-[393px]">
        <StatusBarIPhone />
        <PageHeader title="Compte et mot de passe" onBack={onBack} />
        
        <div className="basis-0 grow min-h-px min-w-px relative shrink-0 w-full">
          <div className="overflow-x-clip overflow-y-auto relative size-full">
            <div className="box-border content-stretch flex flex-col gap-[24px] items-start justify-start px-[30px] py-[20px] relative size-full">
              
              {/* Account Information */}
              <div className="content-stretch flex flex-col gap-[16px] items-start justify-start relative shrink-0 w-full">
                <div className="font-['SF_Pro_Display:Bold',_sans-serif] text-[20px] text-[#212121] w-full">
                  <p className="leading-[normal]">Informations du compte</p>
                </div>
                
                <div className="content-stretch flex flex-col gap-[16px] items-start justify-start relative shrink-0 w-full">
                  <InputField label="Email" value="loris.duchamp@email.com" />
                  <InputField label="Nom d'utilisateur" value="loris_duchamp" />
                  <InputField label="Nom complet" value="Loris Duchamp" />
                </div>
              </div>

              {/* Security */}
              <div className="content-stretch flex flex-col gap-[16px] items-start justify-start relative shrink-0 w-full">
                <div className="font-['SF_Pro_Display:Bold',_sans-serif] text-[20px] text-[#212121] w-full">
                  <p className="leading-[normal]">Sécurité</p>
                </div>
                
                <div className="content-stretch flex flex-col gap-[16px] items-start justify-start relative shrink-0 w-full">
                  <InputField label="Mot de passe" value="••••••••••••" isPassword={true} />
                </div>
                
                <div className="content-stretch flex flex-col gap-[12px] items-start justify-start relative shrink-0 w-full">
                  <ActionButton
                    title="Changer le mot de passe"
                    subtitle="Dernière modification il y a 3 mois"
                    onPress={() => console.log('Change password')}
                  />
                  <ActionButton
                    title="Authentification à deux facteurs"
                    subtitle="Activée • SMS +33 6 •• •• •• 47"
                    onPress={() => console.log('Two-factor auth')}
                  />
                </div>
              </div>

              {/* Account Management */}
              <div className="content-stretch flex flex-col gap-[16px] items-start justify-start relative shrink-0 w-full">
                <div className="font-['SF_Pro_Display:Bold',_sans-serif] text-[20px] text-[#212121] w-full">
                  <p className="leading-[normal]">Gestion du compte</p>
                </div>
                
                <div className="content-stretch flex flex-col gap-[12px] items-start justify-start relative shrink-0 w-full">
                  <ActionButton
                    title="Exporter mes données"
                    subtitle="Télécharger toutes vos données de santé"
                    onPress={() => console.log('Export data')}
                  />
                  <ActionButton
                    title="Désactiver le compte"
                    subtitle="Suspendre temporairement votre compte"
                    onPress={() => console.log('Deactivate account')}
                  />
                  <ActionButton
                    title="Supprimer le compte"
                    subtitle="Supprimer définitivement votre compte et toutes vos données"
                    type="destructive"
                    onPress={() => console.log('Delete account')}
                  />
                </div>
              </div>

              {/* Bottom spacing */}
              <div className="h-[100px] w-full" />
            </div>
          </div>
        </div>
      </div>
    </div>
  );
}